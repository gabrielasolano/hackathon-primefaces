<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">

<h:head>
</h:head>
<h:body>
    <h:form>
<p:messages id="mensagem" showDetail="true" autoUpdate="true" closable="true" />
		<br />
    <p:dataTable id="agentes" var="ag" value="#{agenteMB.listar()}">
    
        <f:facet name="header">
            Agentes Cadastrados
        </f:facet>
        <p:column headerText="Matrícula">
            <h:outputText value="#{ag.matricula}" />
        </p:column>
        <p:column headerText="Nome">
            <h:outputText value="#{ag.nome}" />
        </p:column>
        <p:column headerText="Data de contratação">
            <h:outputText value="#{ag.dtContratacao.toString()}" />
        </p:column>
        <p:column headerText="Tempo de serviço">
            <h:outputText value="#{ag.tempoServico}" />
        </p:column>
        <p:column style="text-align: center">
        <p:commandButton value="Alterar" action="#{agenteMB.recuperaId()}">
        	<f:param name="matricula" value="#{ag.matricula}"></f:param>
        	<f:param name="nome" value="#{ag.nome}"/>
        	<f:param name="dtContratacao" value="#{ag.dtContratacao}"/>
        	<f:param name="tempoServico" value="#{ag.tempoServico}"/>
        </p:commandButton>
		</p:column>
		<p:column style="text-align: center">
		<p:commandButton value="Remover" actionListener="#{agenteMB.removerAgente(ag.matricula)}" update="agentes" ajax="false">
		</p:commandButton>
        </p:column>
    </p:dataTable>
	<p:commandButton value="Cadastrar" action="cadastrarAgente" />
	<p:commandButton value="Voltar" action="/index"/>
    </h:form>
</h:body>
</html>